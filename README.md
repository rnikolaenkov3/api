# Тестовое задание

## Установка
* скачать 
* настроить доступ к БД
* запустить `php artisan migrate:fresh --seed` будут сгенерированы продукты, категрии и установлена связь между некоторыми из них

## Работа
### Установка значений по умолчанию
В конфигурационном файле `config/main.php`

### Получение продуктов
* `GET: /api/v1` - получаем все продукты, лимит по умолчанию 50, начиная с 0
* `GET: /api/v1?limit=100&offset=10` - получаем все продукты лимит установлен 100, начиная с 10
* `GET: /api/v1?published=1` - все опубликованные продукты
* `GET: /api/v1?published=0` - все не опубликованные
* `GET: /api/v1?with_trash=1` - все продукты вместе с удаленными
* `GET: /api/v1?price_from=950&price_to=960` - все продукты с ценой от 950 до 960
* `GET: /api/v1?title=product` - продукты с точным совпадением заголовка
* `GET: /api/v1?category_id=2` - все продукты из категории с id=2
* `GET: /api/v1?category_name=category-1` - все продукты из категории с названием category-1

Фильтры можно применять вместе, например `GET: /api/v1?published=1&category_id=2` получаем все опубликованные товары из категории с id=2

### Получение продукта по ID
* `GET: /api/v1/{id}`

### Обновление продукта
* `PUT: /api/v1/products/update/2` и в теле запроса передаем json 
`{
  "title": "test",
  "description": "asdasdsa",
  "categories": [1,2,3]
  }` - будет обновлен продукт с id=2 и обновлены поля, которые переданы в теле запроса. Обновляются только те поля, которые переданы.
  
### Создание продукта
* `POST: /api/v1/products/create` и в теле запроса передаем поля 
  `{
  "title": "test",
  "description": "asdasdsa",
  "price" => 100,
  "categories": [1,2,3]
  }`
  
### Удаление продукта
* `DELETE: /api/v1/products/delete/2` - будет удален продукт с id=2, при удалении продукт физически остается в базе, в поле deleted_at записывается дата удаления

### Получение категорий
* `GET: /api/v1/categories` - получение всех категорий, лимит по умолчанию 50, начиная с 0, по аналогии с продуктами можно изменить лимит
* `GET: /api/v1/categories?title=category-2` - поиск категории с названием category-2

### Получение категории по ID
* `GET: /api/v1/categories/{id}`

### Создание категории
* `POST: /api/v1/categories/create` - в теле запроса передаем `{
  "title": "test"
  }` - будет создана категрия с названием test
  
### Удаление категории
* `DELETE: /api/v1/categories/delete/{id}` - будет удалена категория с id = {id}. Если есть продукты, которые привязаны к категории, то категорию удалить нельзя

